"use strict";const inputElement=document.querySelector(".js-filter"),showsContainer=document.querySelector(".js-shows"),formElement=document.querySelector(".js-form"),favoritesContainer=document.querySelector(".js-favorites");let shows=[],favorites=[];function handleInput(e){e.preventDefault(),fetchApiData()}function fetchApiData(){fetch("http://api.tvmaze.com/search/shows?q="+inputElement.value).then(e=>e.json()).then(e=>{shows=e,renderShows()})}function renderShows(){let e="";for(let s=0;s<shows.length;s++){let t=shows[s].show.id,o=shows[s].show.name,a=shows[s].show.image;e+=`<li class="card js-card" id="${t}">`,e+=`<h4 class="js-show-name">${o}</h4>`,e+=null===a?'<img src="https://via.placeholder.com/210x295/ffffff/666666/?\n            text=TV" alt="no image available" class="js-show-img"/>':`<img src="${a.medium}"alt="Poster of '${o}'" class="js-show-img"/>`,e+="</li>"}showsContainer.innerHTML=e,listenShows()}function listenShows(){const e=document.querySelectorAll(".js-card");for(const s of e)s.addEventListener("click",handleCards),s.addEventListener("click",clickedCard)}function clickedCard(e){event.currentTarget.classList.toggle("clicked-card")}function handleCards(e){const s=parseInt(e.currentTarget.id),t=shows.find(e=>s===e.show.id),o=favorites.findIndex(e=>s===e.show.id);-1===o?favorites.push(t):favorites.splice(o,1),storeFavorites()}function storeFavorites(){const e=JSON.stringify(favorites);localStorage.setItem("favorites",e),renderFavorites()}function fetchFavorites(){const e=localStorage.getItem("favorites");if(e){const s=JSON.parse(e);favorites=s,renderFavorites()}else listenShows()}function renderFavorites(){let e="";for(let s=0;s<favorites.length;s++){let t=favorites[s].show.id,o=favorites[s].show.name,a=favorites[s].show.image;e+=`<li class="fav-card js-fav-card" id="${t}">`,e+=`<h4 class="js-fav-name">${o}</h4>`,e+=null===a?'<img src="https://via.placeholder.com/55x75/ffffff/666666/?\n            text=TV" alt="no image available" class="js-show-img"/>':`<img class="fav-img" src="${a.medium}"`,e+="</li>"}favoritesContainer.innerHTML=e,listenShows()}formElement.addEventListener("submit",handleInput),fetchFavorites();